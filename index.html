<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>District 5 Survey Bot - Winston Pierre</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    
    // Lucide React icons as inline SVG components
    const ChevronRight = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" /></svg>
    );
    
    const Vote = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>
    );
    
    const Briefcase = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
    );
    
    const CheckCircle = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
    );
    
    const Mail = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
    );
    
    const Phone = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
    );
    
    const Users = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>
    );
    
    const Download = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" /></svg>
    );
    
    const BarChart3 = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
    );
    
    const MessageSquare = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>
    );
    
    const MapPin = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
    );
    
    const Heart = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
    );

    const District5SurveyBot = () => {
      const TOTAL_STEPS = 9;
      const [step, setStep] = useState(0);
      const [showAnalytics, setShowAnalytics] = useState(false);
      const [demoMode, setDemoMode] = useState(false);
      
      const [responses, setResponses] = useState({
        changeNeeded: '',
        advisoryInterest: null,
        directInputSupport: null,
        policyPriority: '',
        personalImpact: '',
        alignment: null,
        willVote: null,
        phone: '',
        email: '',
        volunteer: null,
        industry: '',
        timestamp: null
      });

      const [allResponses, setAllResponses] = useState([]);

      const demoData = [
        { changeNeeded: 'Affordable Housing', advisoryInterest: 'yes', directInputSupport: 'yes', policyPriority: 'Quick Fix (Immediate Legislation)', personalImpact: 'My rent increased by 40% this year', alignment: 'yes', willVote: 'yes', phone: '617-555-0101', email: 'voter1@example.com', volunteer: 'yes', industry: 'Healthcare', timestamp: '2025-01-20T10:00:00' },
        { changeNeeded: 'Community Safety', advisoryInterest: 'no', directInputSupport: 'yes', policyPriority: 'Community Power (Task Force)', personalImpact: 'Safety Concern', alignment: 'yes', willVote: 'yes', phone: '617-555-0102', email: '', volunteer: 'no', industry: 'Education', timestamp: '2025-01-20T11:00:00' },
        { changeNeeded: 'Affordable Housing', advisoryInterest: 'yes', directInputSupport: 'maybe', policyPriority: 'Long-Term Funding (Grants)', personalImpact: 'Financial Stress', alignment: 'yes', willVote: 'yes', phone: '617-555-0103', email: 'voter3@example.com', volunteer: 'yes', industry: 'Technology', timestamp: '2025-01-20T12:00:00' },
        { changeNeeded: 'Small Business Support', advisoryInterest: 'yes', directInputSupport: 'yes', policyPriority: 'Direct City Hall Action', personalImpact: 'My business struggles with high rent', alignment: 'yes', willVote: 'yes', phone: '617-555-0104', email: 'owner@business.com', volunteer: 'yes', industry: 'Small Business Owner', timestamp: '2025-01-20T13:00:00' },
        { changeNeeded: 'Green Spaces & Parks', advisoryInterest: 'no', directInputSupport: 'yes', policyPriority: 'Community Power (Task Force)', personalImpact: 'Quality of Life', alignment: 'yes', willVote: 'no', phone: '', email: 'voter5@example.com', volunteer: 'no', industry: 'Retired', timestamp: '2025-01-20T14:00:00' },
        { changeNeeded: 'Affordable Housing', advisoryInterest: 'yes', directInputSupport: 'yes', policyPriority: 'Quick Fix (Immediate Legislation)', personalImpact: 'Worried about displacement', alignment: 'yes', willVote: 'yes', phone: '617-555-0106', email: '', volunteer: 'no', industry: 'Construction & Trades', timestamp: '2025-01-20T15:00:00' },
        { changeNeeded: 'Workers Rights & Fair Wages', advisoryInterest: 'yes', directInputSupport: 'yes', policyPriority: 'Quick Fix (Immediate Legislation)', personalImpact: 'Future Opportunity', alignment: 'yes', willVote: 'yes', phone: '617-555-0107', email: 'worker@example.com', volunteer: 'yes', industry: 'Retail & Service', timestamp: '2025-01-20T16:00:00' },
        { changeNeeded: 'Community Safety', advisoryInterest: 'no', directInputSupport: 'maybe', policyPriority: 'Long-Term Funding (Grants)', personalImpact: 'Need safer streets for kids', alignment: 'no', willVote: 'no', phone: '617-555-0108', email: '', volunteer: 'no', industry: 'Healthcare', timestamp: '2025-01-20T17:00:00' }
      ];

      useEffect(() => {
        if (!demoMode) {
          loadResponses();
        } else {
          setAllResponses(demoData);
        }
      }, [demoMode]);

      const loadResponses = () => {
        try {
          const data = JSON.parse(localStorage.getItem('winstonSurveyData') || '[]');
          setAllResponses(data);
        } catch (error) {
          console.error('Error loading responses:', error);
          setAllResponses([]);
        }
      };

      const saveResponse = (finalResponses) => {
        if (demoMode) {
          const timestamp = new Date().toISOString();
          const responseData = { ...finalResponses, timestamp };
          setAllResponses(prev => [...prev, responseData]);
          return;
        }
        
        try {
          const timestamp = new Date().toISOString();
          const responseData = { ...finalResponses, timestamp };
          const existing = JSON.parse(localStorage.getItem('winstonSurveyData') || '[]');
          existing.push(responseData);
          localStorage.setItem('winstonSurveyData', JSON.stringify(existing));
          loadResponses();
        } catch (error) {
          console.error('Error saving response:', error);
        }
      };

      const changeOptions = [
        'Affordable Housing',
        'Community Safety', 
        'Job Training & Career Development',
        'Green Spaces & Parks',
        'Small Business Support',
        'Workers Rights & Fair Wages',
        'Other'
      ];

      const industryOptions = [
        'Healthcare',
        'Education',
        'Construction & Trades',
        'Technology',
        'Retail & Service',
        'Government & Public Service',
        'Small Business Owner',
        'Student',
        'Retired',
        'Other'
      ];

      const policyOptions = [
        'Quick Fix (Immediate Legislation)',
        'Community Power (Task Force)',
        'Long-Term Funding (Grants)',
        'Direct City Hall Action'
      ];

      const campaignInfo = {
        bio: "As a City Planner and Father, Winston understands how policy affects the kitchen table. He grew up being told to wait his turn. Now, he's running so our communities never have to wait again.",
        localCommitment: "Winston is committed to solving the housing crisis in Mattapan, Readville, and Roslindale - because District 5 deserves a representative who knows our neighborhoods.",
        priorities: [
          'Build community-led affordable housing',
          'Invest in community safety and quality of life',
          'Create job training in afterschool programs',
          'Preserve and expand green spaces',
          'Support small business with fair leases',
          'Protect workers\' rights and wages'
        ]
      };

      const handleResponse = (field, value) => {
        setResponses(prev => ({ ...prev, [field]: value }));
        setStep(step + 1);
      };

      const handleTextInput = (field, value) => {
        setResponses(prev => ({ ...prev, [field]: value }));
      };

      const handleSubmit = () => {
        // Step 6-8 are combined into one submission step
        saveResponse(responses);
        setStep(TOTAL_STEPS); // Move to final step 9
      };

      const resetSurvey = () => {
        setStep(0);
        setResponses({
          changeNeeded: '',
          advisoryInterest: null,
          directInputSupport: null,
          policyPriority: '',
          personalImpact: '',
          alignment: null,
          willVote: null,
          phone: '',
          email: '',
          volunteer: null,
          industry: '',
          timestamp: null
        });
      };

      const exportData = () => {
        const csvHeader = ['Timestamp', 'Change Needed', 'Advisory Interest', 'Direct Input Support', 'Policy Priority', 'Personal Impact', 'Goals Align', 'Will Vote', 'Phone', 'Email', 'Volunteer', 'Industry'];
        const csvRows = allResponses.map(r => [
          r.timestamp,
          r.changeNeeded,
          r.advisoryInterest,
          r.directInputSupport || '',
          r.policyPriority || '',
          `"${(r.personalImpact || '').replace(/"/g, '""')}"`,
          r.alignment,
          r.willVote,
          r.phone || '',
          r.email || '',
          r.volunteer || '',
          r.industry || ''
        ]);
        
        const csv = [csvHeader, ...csvRows].map(row => row.join(',')).join('\n');
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'winston-campaign-data-' + new Date().toISOString().split('T')[0] + '.csv';
        a.click();
      };

      const getAnalytics = () => {
        if (allResponses.length === 0) return null;

        const willVoteYes = allResponses.filter(r => r.willVote === 'yes').length;
        const volunteerYes = allResponses.filter(r => r.volunteer === 'yes').length;
        const advisoryYes = allResponses.filter(r => r.advisoryInterest === 'yes').length;
        const directInputYes = allResponses.filter(r => r.directInputSupport === 'yes').length;

        const changeCounts = {};
        const policyCounts = {};
        
        allResponses.forEach(r => {
          if (r.changeNeeded) changeCounts[r.changeNeeded] = (changeCounts[r.changeNeeded] || 0) + 1;
          if (r.policyPriority) policyCounts[r.policyPriority] = (policyCounts[r.policyPriority] || 0) + 1;
        });

        return {
          total: allResponses.length,
          willVoteYes,
          volunteerYes,
          advisoryYes,
          directInputYes,
          willVotePercent: Math.round((willVoteYes / allResponses.length) * 100),
          volunteerPercent: Math.round((volunteerYes / allResponses.length) * 100),
          directInputPercent: Math.round((directInputYes / allResponses.length) * 100),
          topChange: Object.entries(changeCounts).sort((a, b) => b[1] - a[1])[0],
          topPolicy: Object.entries(policyCounts).sort((a, b) => b[1] - a[1])[0],
          phonesCollected: allResponses.filter(r => r.phone).length,
          emailsCollected: allResponses.filter(r => r.email).length
        };
      };

      const analytics = getAnalytics();

      if (showAnalytics) {
        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 p-4">
            <div className="max-w-6xl mx-auto">
              <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
                <div className="bg-gradient-to-r from-blue-700 to-blue-600 p-6 text-white">
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-3">
                      <BarChart3 className="w-8 h-8" />
                      <div>
                        <h1 className="text-2xl font-bold">District 5 Survey Analytics</h1>
                        <p className="text-blue-100 text-sm">Community Input Data</p>
                      </div>
                    </div>
                    <button
                      onClick={() => setShowAnalytics(false)}
                      className="bg-blue-800 hover:bg-blue-900 px-4 py-2 rounded-lg font-semibold transition"
                    >
                      Back to Survey
                    </button>
                  </div>
                </div>

                <div className="p-8">
                  {analytics ? (
                    <>
                      <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                        <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-lg border-2 border-blue-200">
                          <div className="text-3xl font-bold text-blue-700">{analytics.total}</div>
                          <div className="text-sm text-gray-700 font-medium">Total Responses</div>
                        </div>
                        <div className="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border-2 border-green-200">
                          <div className="text-3xl font-bold text-green-700">{analytics.willVotePercent}%</div>
                          <div className="text-sm text-gray-700 font-medium">Will Vote Yes</div>
                          <div className="text-xs text-gray-500 mt-1">{analytics.willVoteYes} voters</div>
                        </div>
                        <div className="bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-lg border-2 border-purple-200">
                          <div className="text-3xl font-bold text-purple-700">{analytics.phonesCollected}</div>
                          <div className="text-sm text-gray-700 font-medium">SMS Opt-ins</div>
                          <div className="text-xs text-gray-500 mt-1">Ready for text campaigns</div>
                        </div>
                        <div className="bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-lg border-2 border-yellow-200">
                          <div className="text-3xl font-bold text-yellow-700">{analytics.volunteerYes}</div>
                          <div className="text-sm text-gray-700 font-medium">Volunteers</div>
                          <div className="text-xs text-gray-500 mt-1">{analytics.volunteerPercent}% of respondents</div>
                        </div>
                      </div>

                      <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div className="bg-gray-50 p-6 rounded-lg border-2 border-gray-200">
                          <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <MapPin className="w-5 h-5 text-blue-600" />
                            Top Priority Issue
                          </h3>
                          {analytics.topChange ? (
                            <div>
                              <div className="text-2xl font-bold text-blue-700">{analytics.topChange[0]}</div>
                              <div className="text-sm text-gray-600 mt-1">{analytics.topChange[1]} responses</div>
                            </div>
                          ) : <p className="text-sm text-gray-500">No data yet</p>}
                        </div>

                        <div className="bg-gray-50 p-6 rounded-lg border-2 border-gray-200">
                          <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <CheckCircle className="w-5 h-5 text-purple-600" />
                            Preferred Action
                          </h3>
                          {analytics.topPolicy ? (
                            <div>
                              <div className="text-xl font-bold text-purple-700">{analytics.topPolicy[0]}</div>
                              <div className="text-sm text-gray-600 mt-1">{analytics.topPolicy[1]} responses</div>
                            </div>
                          ) : <p className="text-sm text-gray-500">No data yet</p>}
                        </div>
                      </div>

                      <div className="bg-gradient-to-br from-indigo-50 to-indigo-100 p-6 rounded-lg border-2 border-indigo-200 mb-8">
                        <h3 className="font-bold text-gray-800 mb-4">Direct Input Tool Support</h3>
                        <div className="text-3xl font-bold text-indigo-700">{analytics.directInputPercent}%</div>
                        <div className="text-sm text-gray-600">Support hyper-local democracy app</div>
                      </div>

                      <button
                        onClick={exportData}
                        className="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2"
                      >
                        <Download className="w-5 h-5" />
                        Export Campaign Data (CSV)
                      </button>
                    </>
                  ) : (
                    <div className="text-center py-12 text-gray-500">
                      <BarChart3 className="w-16 h-16 mx-auto mb-4 opacity-50" />
                      <p className="text-lg font-semibold">No responses yet</p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900 p-4 flex items-center justify-center">
          <div className="max-w-2xl w-full bg-white rounded-2xl shadow-2xl overflow-hidden">
            <div className="bg-gradient-to-r from-blue-700 to-blue-600 p-6 text-white">
              <div className="flex items-center justify-between mb-2">
                <div className="flex items-center gap-3">
                  <MapPin className="w-8 h-8" />
                  <div>
                    <h1 className="text-2xl font-bold">District 5 Survey Bot</h1>
                    <p className="text-blue-100 text-sm">Community Priorities • Winston Pierre</p>
                  </div>
                </div>
                {/* Demo Mode Toggle (Admin Feature) */}
                <div className="flex items-center gap-2 text-sm">
                    <input
                      type="checkbox"
                      id="demo-mode"
                      checked={demoMode}
                      onChange={() => setDemoMode(prev => !prev)}
                      className="form-checkbox text-yellow-400 border-gray-300 rounded"
                    />
                    <label htmlFor="demo-mode" className="text-blue-100">Demo Mode</label>
                </div>
                {allResponses.length > 0 && (
                  <button
                    onClick={() => setShowAnalytics(true)}
                    className="bg-blue-800 hover:bg-blue-900 p-2 rounded-lg transition"
                    title="View Analytics"
                  >
                    <BarChart3 className="w-5 h-5" />
                  </button>
                )}
              </div>
              <div className="mt-4 bg-blue-800 bg-opacity-50 rounded-lg p-3">
                <div className="flex justify-between text-xs">
                  <span>Progress</span>
                  <span>{Math.min(step, TOTAL_STEPS)}/{TOTAL_STEPS}</span>
                </div>
                <div className="mt-2 bg-blue-900 rounded-full h-2">
                  <div
                    className="bg-yellow-400 h-2 rounded-full transition-all duration-500"
                    style={{ width: (Math.min(step, TOTAL_STEPS) / TOTAL_STEPS) * 100 + '%' }}
                  />
                </div>
              </div>
            </div>

            <div className="p-8">
              {step === 0 && (
                <div className="space-y-6 animate-fadeIn">
                  <div className="flex items-start gap-3">
                    <MapPin className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                    <div>
                      <h2 className="text-xl font-bold text-gray-800 mb-2">
                        What change do you need most in District 5?
                      </h2>
                      <p className="text-sm text-gray-600">Your priority will shape Winston's first 100 days.</p>
                    </div>
                  </div>
                  <div className="space-y-3">
                    {changeOptions.map((option) => (
                      <button
                        key={option}
                        onClick={() => handleResponse('changeNeeded', option)}
                        className="w-full text-left bg-gray-50 hover:bg-blue-50 border-2 border-gray-200 hover:border-blue-400 p-4 rounded-lg transition-all group"
                      >
                        <div className="flex items-center justify-between">
                          <span className="font-medium text-gray-800 group-hover:text-blue-700">{option}</span>
                          <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-blue-600" />
                        </div>
                      </button>
                    ))}
                  </div>
                </div>
              )}

              {step === 1 && (
                <div className="space-y-6 animate-fadeIn">
                  <div className="flex items-start gap-3">
                    <Users className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                    <div>
                      <h2 className="text-xl font-bold text-gray-800 mb-2">
                        Would you lend your expertise to solve <span className="text-blue-600">{responses.changeNeeded}</span>?
                      </h2>
                      <p className="text-sm text-gray-600">We're forming resident committees to create real solutions—no waiting for politicians.</p>
                    </div>
                  </div>
                  
                  <div className="bg-blue-50 border-l-4 border-blue-600 p-4 rounded-r-lg">
                    <p className="text-sm font-medium text-blue-800">Your involvement is the key to local democracy.</p>
                  </div>
                  <div className="space-y-3">
                      <button
                          onClick={() => handleResponse('advisoryInterest', 'yes')}
                          className="w-full text-left bg-green-50 hover:bg-green-100 border-2 border-green-200 hover:border-green-400 p-4 rounded-lg transition-all group"
                      >
                          <div className="flex items-center justify-between">
                              <span className="font-medium text-green-800">Yes, I'm ready to advise!</span>
                              <ChevronRight className="w-5 h-5 text-green-400 group-hover:text-green-600" />
                          </div>
                      </button>
                      <button
                          onClick={() => handleResponse('advisoryInterest', 'no')}
                          className="w-full text-left bg-gray-50 hover:bg-gray-100 border-2 border-gray-200 hover:border-gray-400 p-4 rounded-lg transition-all group"
                      >
                          <div className="flex items-center justify-between">
                              <span className="font-medium text-gray-800">No, but thank you.</span>
                              <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-gray-600" />
                          </div>
                      </button>
                  </div>
                </div>
              )}

              {step === 2 && (
                <div className="space-y-6 animate-fadeIn">
                    <div className="flex items-start gap-3">
                        <MessageSquare className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                        <div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Do you support a direct, hyper-local input tool (like an app) for district issues?
                            </h2>
                            <p className="text-sm text-gray-600">A system for neighbors to quickly propose and vote on community improvements.</p>
                        </div>
                    </div>
                    <div className="space-y-3">
                        <button
                            onClick={() => handleResponse('directInputSupport', 'yes')}
                            className="w-full text-left bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-blue-800">Yes, that is the future of democracy.</span>
                                <ChevronRight className="w-5 h-5 text-blue-400 group-hover:text-blue-600" />
                            </div>
                        </button>
                        <button
                            onClick={() => handleResponse('directInputSupport', 'maybe')}
                            className="w-full text-left bg-yellow-50 hover:bg-yellow-100 border-2 border-yellow-200 hover:border-yellow-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-yellow-800">Maybe, I'd need more details.</span>
                                <ChevronRight className="w-5 h-5 text-yellow-400 group-hover:text-yellow-600" />
                            </div>
                        </button>
                        <button
                            onClick={() => handleResponse('directInputSupport', 'no')}
                            className="w-full text-left bg-gray-50 hover:bg-gray-100 border-2 border-gray-200 hover:border-gray-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-gray-800">No, I prefer traditional methods.</span>
                                <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-gray-600" />
                            </div>
                        </button>
                    </div>
                </div>
              )}

              {step === 3 && (
                <div className="space-y-6 animate-fadeIn">
                    <div className="flex items-start gap-3">
                        <Briefcase className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                        <div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Which action would be your priority to address the issue?
                            </h2>
                            <p className="text-sm text-gray-600">Tell us how you think progress should be made.</p>
                        </div>
                    </div>
                    <div className="space-y-3">
                        {policyOptions.map((option) => (
                            <button
                                key={option}
                                onClick={() => handleResponse('policyPriority', option)}
                                className="w-full text-left bg-gray-50 hover:bg-blue-50 border-2 border-gray-200 hover:border-blue-400 p-4 rounded-lg transition-all group"
                            >
                                <div className="flex items-center justify-between">
                                    <span className="font-medium text-gray-800 group-hover:text-blue-700">{option}</span>
                                    <ChevronRight className="w-5 h-5 text-gray-400 group-hover:text-blue-600" />
                                </div>
                            </button>
                        ))}
                    </div>
                </div>
              )}
              
              {step === 4 && (
                <div className="space-y-6 animate-fadeIn">
                    <div className="flex items-start gap-3">
                        <Heart className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                        <div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                How does this issue personally impact you?
                            </h2>
                            <p className="text-sm text-gray-600">A few words help us understand the human side of the policy.</p>
                        </div>
                    </div>
                    <textarea
                        value={responses.personalImpact}
                        onChange={(e) => handleTextInput('personalImpact', e.target.value)}
                        placeholder="e.g., 'My commute is unsafe,' or 'I worry about my child’s future here.'"
                        rows="4"
                        className="w-full border-2 border-gray-300 rounded-lg p-3 focus:border-blue-500 focus:ring-blue-500 transition"
                    ></textarea>
                    <button
                        onClick={() => setStep(step + 1)}
                        disabled={!responses.personalImpact}
                        className={`w-full py-3 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 ${
                            responses.personalImpact
                                ? 'bg-blue-600 hover:bg-blue-700 text-white'
                                : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                        }`}
                    >
                        Next Step
                        <ChevronRight className="w-5 h-5" />
                    </button>
                </div>
              )}
              
              {step === 5 && (
                <div className="space-y-6 animate-fadeIn">
                    <div className="flex items-start gap-3">
                        <Vote className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                        <div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Do Winston's priorities (Affordable Housing, Safety, Jobs) align with yours?
                            </h2>
                            <p className="text-sm text-gray-600">Your direct feedback helps us refine our message and platform.</p>
                        </div>
                    </div>
                    <div className="space-y-3">
                        <button
                            onClick={() => handleResponse('alignment', 'yes')}
                            className="w-full text-left bg-green-50 hover:bg-green-100 border-2 border-green-200 hover:border-green-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-green-800">Yes, I support these goals!</span>
                                <ChevronRight className="w-5 h-5 text-green-400 group-hover:text-green-600" />
                            </div>
                        </button>
                        <button
                            onClick={() => handleResponse('alignment', 'no')}
                            className="w-full text-left bg-red-50 hover:bg-red-100 border-2 border-red-200 hover:border-red-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-red-800">No, my focus is elsewhere.</span>
                                <ChevronRight className="w-5 h-5 text-red-400 group-hover:text-red-600" />
                            </div>
                        </button>
                    </div>
                </div>
              )}

              {step === 6 && (
                <div className="space-y-6 animate-fadeIn">
                    <div className="flex items-start gap-3">
                        <Vote className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                        <div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Will you commit to voting for Winston Pierre in the upcoming election?
                            </h2>
                            <p className="text-sm text-gray-600">The most important data point for our campaign.</p>
                        </div>
                    </div>
                    <div className="space-y-3">
                        <button
                            onClick={() => handleResponse('willVote', 'yes')}
                            className="w-full text-left bg-green-50 hover:bg-green-100 border-2 border-green-200 hover:border-green-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-green-800">Yes, I will vote for Winston.</span>
                                <ChevronRight className="w-5 h-5 text-green-400 group-hover:text-green-600" />
                            </div>
                        </button>
                        <button
                            onClick={() => handleResponse('willVote', 'no')}
                            className="w-full text-left bg-red-50 hover:bg-red-100 border-2 border-red-200 hover:border-red-400 p-4 rounded-lg transition-all group"
                        >
                            <div className="flex items-center justify-between">
                                <span className="font-medium text-red-800">No, I'm undecided/voting for someone else.</span>
                                <ChevronRight className="w-5 h-5 text-red-400 group-hover:text-red-600" />
                            </div>
                        </button>
                    </div>
                </div>
              )}
              
              {(step >= 7 && step < TOTAL_STEPS) && (
                <div className="space-y-6 animate-fadeIn">
                    <div className="flex items-start gap-3">
                        <Phone className="w-6 h-6 text-blue-600 mt-1 flex-shrink-0" />
                        <div>
                            <h2 className="text-xl font-bold text-gray-800 mb-2">
                                Stay Connected: Contact & Volunteer Info
                            </h2>
                            <p className="text-sm text-gray-600">Help us keep you updated on the issues you care about. (Optional)</p>
                        </div>
                    </div>
                    
                    <div className="space-y-4">
                        <div className="relative">
                            <label htmlFor="phone" className="block text-sm font-medium text-gray-700">Phone (for text updates)</label>
                            <input
                                id="phone"
                                type="tel"
                                value={responses.phone}
                                onChange={(e) => handleTextInput('phone', e.target.value)}
                                placeholder="(617) 555-1234"
                                className="mt-1 w-full border-2 border-gray-300 rounded-lg p-3 focus:border-blue-500 focus:ring-blue-500 transition"
                            />
                        </div>

                        <div className="relative">
                            <label htmlFor="email" className="block text-sm font-medium text-gray-700">Email (for campaign news)</label>
                            <input
                                id="email"
                                type="email"
                                value={responses.email}
                                onChange={(e) => handleTextInput('email', e.target.value)}
                                placeholder="name@example.com"
                                className="mt-1 w-full border-2 border-gray-300 rounded-lg p-3 focus:border-blue-500 focus:ring-blue-500 transition"
                            />
                        </div>

                        <div className="relative">
                            <label htmlFor="industry" className="block text-sm font-medium text-gray-700">Your Industry/Occupation</label>
                            <select
                                id="industry"
                                value={responses.industry}
                                onChange={(e) => handleTextInput('industry', e.target.value)}
                                className="mt-1 w-full border-2 border-gray-300 rounded-lg p-3 focus:border-blue-500 focus:ring-blue-500 transition appearance-none bg-white"
                            >
                                <option value="" disabled>Select your industry</option>
                                {industryOptions.map(option => <option key={option} value={option}>{option}</option>)}
                            </select>
                        </div>

                        <div className="space-y-2">
                            <p className="block text-sm font-medium text-gray-700">Are you interested in volunteering?</p>
                            <div className="flex space-x-4">
                                <button
                                    onClick={() => handleTextInput('volunteer', 'yes')}
                                    className={`px-4 py-2 rounded-full font-semibold transition ${
                                        responses.volunteer === 'yes'
                                            ? 'bg-yellow-500 text-white'
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                >
                                    Yes
                                </button>
                                <button
                                    onClick={() => handleTextInput('volunteer', 'no')}
                                    className={`px-4 py-2 rounded-full font-semibold transition ${
                                        responses.volunteer === 'no'
                                            ? 'bg-yellow-500 text-white'
                                            : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                    }`}
                                >
                                    No
                                </button>
                            </div>
                        </div>
                    </div>

                    <button
                        onClick={handleSubmit}
                        className="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-all flex items-center justify-center gap-2"
                    >
                        Submit Survey & Finish
                        <CheckCircle className="w-5 h-5" />
                    </button>
                    <button
                        onClick={() => setStep(step + 1)} // Skip submission for testing flow
                        className="w-full text-sm text-gray-500 hover:text-gray-700 mt-2"
                    >
                        Skip for now
                    </button>
                </div>
              )}

              {step === TOTAL_STEPS && (
                <div className="text-center space-y-6 py-8 animate-fadeIn">
                    <CheckCircle className="w-20 h-20 mx-auto text-green-500" />
                    <h2 className="text-2xl font-bold text-gray-800">
                        Thank You, Neighbor!
                    </h2>
                    <p className="text-gray-600">
                        Your input is critical. We will use this data to finalize the policy platform for District 5.
                    </p>
                    <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                        <p className="font-semibold text-blue-700">Winston Pierre for District 5</p>
                    </div>
                    <button
                        onClick={resetSurvey}
                        className="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all"
                    >
                        Take Another Survey
                    </button>
                    {demoMode && (
                        <button
                            onClick={() => setShowAnalytics(true)}
                            className="w-full mt-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-all"
                        >
                            View Analytics
                        </button>
                    )}
                </div>
              )}
            </div>
          </div>
        </div>
      );
    };

    // Render the component to the root div
    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<District5SurveyBot />);
  </script>
</body>
</html>
